# Laravel CRUD для продуктов с использованием PostgreSQL, JWT и Elasticsearch

## Описание

Данное тестовое задание включает реализацию CRUD-операций для продуктов в Laravel, с использованием PostgreSQL в качестве базы данных, аутентификации через JWT и поискового движка Elasticsearch для поиска продуктов. Все компоненты запускаются с использованием Docker Compose.

## Требования

- PHP 8.2
- Composer
- PostgreSQL
- Elasticsearch
- Docker и Docker Compose
- Makefile установлен на вашей машине (опционально для упрощения команд)

## Технологии

| Технология                           | Использование                  |
|--------------------------------------|--------------------------------|
| ✅ **Laravel 10**                    | Бэкенд API                     |
| ✅ **PostgreSQL**                    | База данных                    |
| ✅ **Elasticsearch**                 | Поиск и индексация продуктов   |
| ✅ **JWT**                           | Аутентификация                 |
| ✅ **Docker + Docker Compose**       | Окружение для приложения      |
| ✅ **Make**                          | Управление процессами         |
| ✅ **PHPUnit**                       | Тестирование                   |
| ✅ **SOLID, DI**                     | Архитектурные принципы         |
| ✅ **PHP 8.2**                       | Версия PHP                     |


## Установка и настройка

### 1. Клонировать репозиторий

```bash
git clone https://github.com/itech-programmer/laravel-crud-elasticsearch.git
cd laravel-crud-elasticsearch
```

### 2. Установка зависимостей и запуск Docker
Запускает контейнеры и устанавливает зависимости.
```bash
make start
```

### 3. Миграции базы данных
Выполняет миграции базы данных.
```bash
make migrate
```

Если необходимо заполнить базу данных тестовыми данными, используйте команду:

```bash
make seed
```

### 4. Проверка тестов
Выполняет тесты проекта.
```bash
make test
```

## Добавлена Postman коллекция

Для удобства тестирования и работы с API добавлена **Postman коллекция** для Elasticsearch. Коллекция включает все необходимые запросы для взаимодействия с Elasticsearch в рамках данного проекта.

### Как использовать:

1. Импортируйте файл `Elasticsearch.postman_collection.json` в Postman.
2. Убедитесь, что Elasticsearch контейнер запущен и доступен по адресу `http://localhost:9200`.
3. Выполните запросы из коллекции для проверки функциональности поиска и индексации продуктов.

Файл коллекции можно найти в корне проекта: `Elasticsearch.postman_collection.json`.

## Основные команды Makefile

| Команда               | Описание                                                            |
|-----------------------|---------------------------------------------------------------------|
| `make start`          | Запуск проекта (автоматическая установка зависимостей, билд, запуск) |
| `make up`             | Запуск Docker-контейнеров                                            |
| `make down`           | Остановка Docker-контейнеров                                         |
| `make restart`        | Перезапуск контейнеров                                               |
| `make build`          | Пересборка Docker-контейнеров без кеша                               |
| `make composer-install` | Установка зависимостей через Composer (без dev зависимостей)        |
| `make migrate`        | Запуск миграций БД                                                  |
| `make seed`           | Заполнение базы данных начальными данными                           |
| `make logs`           | Просмотр логов контейнеров в реальном времени                        |
| `make bash`           | Открытие консоли внутри контейнера                                   |
| `make optimize`       | Оптимизация кэшей конфигурации, маршрутов и представлений            |
| `make cache-clear`    | Очистка кэша, конфигурации, маршрутов и представлений               |

